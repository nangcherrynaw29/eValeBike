<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compare Test Reports</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.3/css/bootstrap.min.css}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/css/compare-chart.css">

</head>
<body>

<div th:insert="~{fragments/menu.html}"></div>

<div class="container-fluid mt-4">
    <div class="content-wrapper">

        <!-- Bike Under Test -->
        <div class="section-block">
            <h5 class="section-title">Bike Under Test</h5>
            <p><strong>Test A (QR):</strong> <span th:text="${reports[0].id()}"></span></p>
            <p><strong>Test B (QR):</strong> <span th:text="${reports[1].id()}"></span></p>
        </div>

        <!-- Metric Selector -->
        <div class="section-block">
            <h5 class="section-title">Select Metric to Compare</h5>
            <div id="metricSelector" class="d-flex flex-wrap gap-3 pt-2">
                <label><input type="radio" name="metric" value="batteryVoltage" checked> Battery Voltage</label>
                <label><input type="radio" name="metric" value="batteryCurrent"> Battery Current</label>
                <label><input type="radio" name="metric" value="batteryCapacity"> Battery Capacity</label>
                <label><input type="radio" name="metric" value="batteryTemperatureCelsius"> Battery Temp (Â°C)</label>
                <label><input type="radio" name="metric" value="chargeStatus"> Charge Status</label>
                <label><input type="radio" name="metric" value="assistanceLevel"> Assistance Level</label>
                <label><input type="radio" name="metric" value="torqueCrankNm"> Torque Crank (Nm)</label>
                <label><input type="radio" name="metric" value="bikeWheelSpeedKmh"> Wheel Speed (km/h)</label>
                <label><input type="radio" name="metric" value="cadanceRpm"> Cadence (RPM)</label>
                <label><input type="radio" name="metric" value="engineRpm"> Engine RPM</label>
                <label><input type="radio" name="metric" value="enginePowerWatt"> Engine Power (W)</label>
                <label><input type="radio" name="metric" value="wheelPowerWatt"> Wheel Power (W)</label>
                <label><input type="radio" name="metric" value="rollTorque"> Roll Torque</label>
                <label><input type="radio" name="metric" value="loadcellN"> Load Cell (N)</label>
                <label><input type="radio" name="metric" value="rolHz"> Rol Hz</label>
                <label><input type="radio" name="metric" value="horizontalInclination"> Horizontal Inclination</label>
                <label><input type="radio" name="metric" value="verticalInclination"> Vertical Inclination</label>
                <label><input type="radio" name="metric" value="loadPower"> Load Power</label>
                <label><input type="radio" name="metric" value="statusPlug"> Status Plug</label>
            </div>
        </div>

        <!-- Chart Section -->
        <div class="section-block">
            <h5 class="section-title">Metric Comparison Chart</h5>
            <div class="chart-container">
                <canvas id="comparisonChart" style="width: 100%; height: 100%;"></canvas>
            </div>

        </div>

        <!-- Navigation -->
        <div class="text-center mt-4">
            <a th:href="@{/technician/test-report-dashboard}" class="btn btn-primary">Back to Test Report Dashboard</a>
        </div>

    </div>
</div>

<div th:insert="~{fragments/footer.html}" class="mt-4"></div>

<script th:inline="javascript">
    const dataReport1 = /*[[${entries[0]}]]*/ [];
    const dataReport2 = /*[[${entries[1]}]]*/ [];
</script>

<script src="/js/technician/compare-chart.js"></script>

</body>
</html>
